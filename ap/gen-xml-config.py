#!/usr/bin/env python3
#vimrun! ./gen.py

from yattag import Doc, indent

doc, tag, text = Doc().tagtext()

# Abrams Locations
"""
31.14386835,-97.75301469
31.14385917,-97.75294496
31.14384769,-97.75288058
31.14383851,-97.75280816
31.14382933,-97.75274111
31.14382244,-97.75267405
31.14381555,-97.75260432
31.143687,-97.75304688
31.14367782,-97.75297982
31.14366863,-97.75291009
31.14365716,-97.75284303
31.14365256,-97.75277329
31.14364338,-97.75270624
31.1436342,-97.75264187
"""

# T72 Locations
"""
31.14499408,-97.75807361
31.14498538,-97.75801259
31.14497522,-97.75794819
31.14496507,-97.75789056
31.14495781,-97.75782616
31.14495056,-97.75776345
31.14494331,-97.75769735
31.14493025,-97.75763125
31.14492445,-97.75757193
31.14491285,-97.75750074
31.14490704,-97.75744481
31.14490124,-97.75738549
31.14489254,-97.75732448
31.14488093,-97.75725668
"""

LAT_LONG = (
	(31.14122538, -97.71313297, 1),
	(31.14130327, -97.71282675, 1),
	(31.14138327, -97.71251562, 1),
	(31.14146432, -97.71221309, 1),
	(31.14154536, -97.71190318, 1),
	(31.14162115, -97.71160065, 1),
	(31.14046115, -97.71286535, 2),
	(31.14054286, -97.71255952, 2),
	(31.14061951, -97.71225284, 2),
	(31.14069688, -97.71194532, 2),
	(31.14077859, -97.71163779, 2),
	(31.14085451, -97.71133027, 2),
	(31.13985639, -97.71265771, 3),
	(31.13991992, -97.71241122, 3),
	(31.13998202, -97.71216593, 3),
	(31.14004573, -97.71192118, 3),
	(31.14010886, -97.71167643, 3),
	(31.14017085, -97.71143033, 3),
	(31.1390532, -97.71237564, 4),
	(31.13912079, -97.7121332, 4),
	(31.13917925, -97.71188824, 4),
	(31.13924376, -97.71164093, 4),
	(31.13930726, -97.71140187, 4),
	(31.13937177, -97.71115692, 4),
	(31.13826038, -97.71210409, 5),
	(31.13833092, -97.7118597, 5),
	(31.13839173, -97.71161247, 5),
	(31.13845132, -97.71136951, 5),
	(31.13852307, -97.71112512, 5),
	(31.13858631, -97.71088642, 5),
	(31.13865684, -97.71064487, 5)
)

TYPE = {
	int: "double",
	float: "double",
	str: "string"
}

def gen_model(**kwargs):
	for key, val in kwargs.items():
		with tag(key.replace("_", "-"), type=TYPE[type(val)]):
			text(val)

with tag("PropertyList"):
	with tag("models"):
		for i, ll in enumerate(LAT_LONG):
			if i >= 12:
				break

			with tag("model", n=i):
				gen_model(
					legend="",
					path="Models/Aircraft/H-60.xml",
					# absolute_path="Models/Aircraft/H-60.xml",
					# object_line="OBJECT_SHARED Models/Aircraft/H-60.xml -22.60153142 63.99092796 43.7489 0.0 0.0 -0.0",
					# stg_path="w030n60/w023n63/2582136.stg",
					# stg_heading_deg=0,
					# heading_deg=0,
					# pitch_deg=0,
					# roll_deg=0,
					latitude_deg=ll[0],
					longitude_deg=ll[1],
					elevation_ft=900
					# elevation_m=0
				)

print("<?xml version=\"1.0\"?>")
print(indent(
	doc.getvalue(),
	indentation=" " * 2
))
